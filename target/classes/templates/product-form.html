<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${book.id != null} ? 'Редактирование книги' : 'Добавление книги'">Книга</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://kit.fontawesome.com/a2d9d5b6b5.js" crossorigin="anonymous"></script>

    <style>
        body {
            background: #f8f3ec;
            color: #3b2f1d;
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* ===== HEADER ===== */
        header {
            background: #fffaf2;
            border-bottom: 2px solid #e4c59e;
            box-shadow: 0 2px 6px rgba(139,69,19,0.1);
        }
        .navbar-admin {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 3rem;
        }
        .nav-left a {
            color: #3b2f1d;
            text-decoration: none;
            font-weight: 500;
            transition: 0.3s;
        }
        .nav-left a:hover { color: #b96a24; }
        .nav-logo {
            font-size: 1.7rem;
            font-weight: 700;
            color: #b96a24;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* ===== FORM CONTAINER ===== */
        .form-container {
            background: #fffaf2;
            border: 1px solid #e4c59e;
            border-radius: 12px;
            padding: 2.5rem 3rem;
            max-width: 800px;
            margin: 3rem auto;
            box-shadow: 0 4px 12px rgba(139,69,19,0.1);
        }

        h2 {
            color: #8b4513;
            text-align: center;
            font-weight: 700;
            margin-bottom: 1.8rem;
        }

        label {
            color: #4b3c2f;
            margin-bottom: 0.3rem;
            display: block;
            font-weight: 500;
        }

        input, select {
            width: 100%;
            border: 1px solid #e4c59e;
            background: #fff;
            border-radius: 8px;
            padding: 0.6rem 0.8rem;
            color: #3b2f1d;
            transition: 0.3s;
        }

        input:focus, select:focus {
            border-color: #b96a24;
            box-shadow: 0 0 6px rgba(185,106,36,0.3);
            outline: none;
        }

        .form-group {
            margin-bottom: 1.3rem;
        }

        /* ===== BUTTONS ===== */
        .btn {
            border: none;
            border-radius: 8px;
            padding: 0.7rem 1.4rem;
            font-weight: 600;
            cursor: pointer;
            transition: 0.3s;
        }

        .btn-primary {
            background-color: #b96a24;
            color: #fff;
        }
        .btn-primary:hover {
            background-color: #8c4d18;
        }

        .btn-secondary {
            background: #fff5e6;
            color: #8b4513;
            border: 1px solid #d4a86a;
            margin-left: 0.5rem;
        }
        .btn-secondary:hover {
            background: #d4a86a;
            color: #fff;
        }

        footer {
            text-align: center;
            color: #7a5b34;
            padding: 1rem;
            background: #fff5e6;
            border-top: 2px solid #e5cdaa;
            margin-top: auto;
        }
    </style>
</head>

<body>

<!-- ===== HEADER ===== -->
<header>
    <div class="navbar-admin">
        <div class="nav-left">
            <a th:href="@{/manager/books}">
                <i class="fa-solid fa-arrow-left"></i> Назад к книгам
            </a>
        </div>
        <div class="nav-logo">
            <i class="fa-solid fa-book"></i> BookHaven Manager
        </div>
    </div>
</header>

<!-- ===== FORM ===== -->
<div class="form-container">
    <h2 th:text="${book.id != null} ? 'Редактирование книги' : 'Добавление новой книги'"></h2>

    <form th:action="@{/manager/books/save}" method="post" th:object="${book}">
        <input type="hidden" th:field="*{id}">

        <div class="form-group">
            <label for="title"><i class="fa-solid fa-book"></i> Название</label>
            <input type="text" id="title" th:field="*{title}" required>
        </div>

        <div class="form-group">
            <label for="genre"><i class="fa-solid fa-shapes"></i> Жанр</label>
            <input type="text" id="genre" th:field="*{genre}" required>
        </div>

        <div class="form-group">
            <label for="year"><i class="fa-solid fa-calendar"></i> Год издания</label>
            <input type="number" id="year" th:field="*{year}" required>
        </div>

        <div class="form-group">
            <label for="price"><i class="fa-solid fa-ruble-sign"></i> Цена</label>
            <input type="number" step="0.01" id="price" th:field="*{price}" required>
        </div>

        <div class="form-group">
            <label for="stockQuantity"><i class="fa-solid fa-boxes-stacked"></i> Количество на складе</label>
            <input type="number" id="stockQuantity" th:field="*{stockQuantity}" required>
        </div>

        <div class="form-group">
            <label for="author"><i class="fa-solid fa-user-pen"></i> Автор</label>
            <select id="author" th:field="*{author.id}" required>
                <option value="">Выберите автора</option>
                <option th:each="a : ${authors}" th:value="${a.id}" th:text="${a.name}"></option>
            </select>
        </div>

        <div class="form-group">
            <label for="publisher"><i class="fa-solid fa-building"></i> Издатель</label>
            <select id="publisher" th:field="*{publisher.id}" required>
                <option value="">Выберите издателя</option>
                <option th:each="p : ${publishers}" th:value="${p.id}" th:text="${p.name}"></option>
            </select>
        </div>

        <div class="form-group">
            <label for="category"><i class="fa-solid fa-tags"></i> Категория</label>
            <select id="category" th:field="*{category.id}">
                <option value="">Выберите категорию</option>
                <option th:each="c : ${categories}" th:value="${c.id}" th:text="${c.name}"></option>
            </select>
        </div>

        <div class="text-center mt-4">
            <button type="submit" class="btn btn-primary">
                <i class="fa-solid fa-floppy-disk"></i> Сохранить
            </button>
            <a th:href="@{/manager/books}" class="btn btn-secondary">
                <i class="fa-solid fa-xmark"></i> Отмена
            </a>
        </div>
    </form>
</div>

<footer>
    <p>© 2025 BookHaven | Управление книгами</p>
</footer>

</body>
</html>
